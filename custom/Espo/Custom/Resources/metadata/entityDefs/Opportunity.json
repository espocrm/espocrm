{
    "fields": {
        "cOpportunityNumber": {
            "type": "varchar",
            "maxLength": 20,
            "readOnly": true,
            "unique": true,
            "isCustom": true
        },
        "cMonthlyIncome": {
            "type": "currency",
            "tooltip": "Monthly income - auto-filled from Lead",
            "isCustom": true
        },
        "cEmployeeType": {
            "type": "enum",
            "options": [
                "Salaried",
                "Self-Employed",
                "Business",
                "Retired"
            ],
            "tooltip": "Employment type - auto-filled from Lead",
            "isCustom": true
        },
        "cBusinessName": {
            "type": "varchar",
            "maxLength": 150,
            "tooltip": "Business/Employer name - auto-filled from Lead",
            "isCustom": true
        },
        "cCreditScore": {
            "type": "int",
            "min": 250,
            "max": 900,
            "tooltip": "Credit score - auto-filled from Lead",
            "isCustom": true
        },
        "cExistingMonthlyObligations": {
            "type": "currency",
            "tooltip": "Existing monthly obligations - auto-filled from Lead",
            "isCustom": true
        },
        "cFOIR": {
            "type": "float",
            "min": 0,
            "max": 100,
            "tooltip": "FOIR % - auto-filled from Lead",
            "isCustom": true
        },
        "cDTI": {
            "type": "float",
            "min": 0,
            "max": 100,
            "tooltip": "DTI % - auto-filled from Lead",
            "isCustom": true
        },
        "cInterestedProductType": {
            "type": "enum",
            "options": [
                "Personal Loan",
                "Vehicle Loan",
                "Gold Loan",
                "Business Loan",
                "Lease"
            ],
            "tooltip": "Interested product - auto-filled from Lead",
            "isCustom": true
        },
        "cPreferredTenure": {
            "type": "enum",
            "options": [
                "",
                "1",
                "3",
                "6",
                "9",
                "12",
                "15",
                "18",
                "21",
                "24",
                "27",
                "30",
                "33",
                "36",
                "39",
                "42",
                "45",
                "48"
            ],
            "tooltip": "Preferred tenure - auto-filled from Lead",
            "isCustom": true
        },
        "cPurposeOfLoan": {
            "type": "varchar",
            "maxLength": 100,
            "tooltip": "Purpose of loan - auto-filled from Lead",
            "isCustom": true
        },
        "cBankName": {
            "type": "varchar",
            "maxLength": 100,
            "tooltip": "Bank name - auto-filled from Lead",
            "isCustom": true
        },
        "cAccountNo": {
            "type": "int",
            "tooltip": "Account number - auto-filled from Lead",
            "isCustom": true
        },
        "cBranch": {
            "type": "varchar",
            "maxLength": 100,
            "tooltip": true,
            "isCustom": true,
            "options": []
        },
        "cDateOfBirth": {
            "type": "date",
            "tooltip": "Date of birth - auto-filled from Lead",
            "isCustom": true
        },
        "cGender": {
            "type": "enum",
            "options": [
                "Male",
                "Female",
                "Other"
            ],
            "tooltip": "Gender - auto-filled from Lead",
            "isCustom": true
        },
        "cNICNo": {
            "type": "varchar",
            "maxLength": 12,
            "pattern": "^([0-9]{9}[vVxX]|[0-9]{12})$",
            "tooltip": "NIC number - auto-filled from Lead",
            "isCustom": true
        },
        "cPropertyOrVehicleDetails": {
            "type": "varchar",
            "maxLength": 255,
            "tooltip": "Property/vehicle details - auto-filled from Lead",
            "isCustom": true
        },
        "cLoanProductType": {
            "type": "enum",
            "options": [
                "Personal Loan",
                "Business Loan",
                "Gold Loan",
                "Vehicle Loan",
                "Home Loan",
                "Lease"
            ],
            "required": true,
            "default": "Personal Loan",
            "isCustom": true
        },
        "cLoanTenure": {
            "type": "int",
            "required": true,
            "min": 6,
            "max": 360,
            "default": 12,
            "tooltip": "Loan tenure in months",
            "isCustom": true
        },
        "cInterestRate": {
            "type": "float",
            "required": true,
            "min": 1,
            "max": 50,
            "tooltip": "Annual interest rate %",
            "isCustom": true
        },
        "cEmiAmount": {
            "type": "currency",
            "readOnly": true,
            "tooltip": "Monthly EMI auto-calculated",
            "isCustom": true
        },
        "cProcessingFee": {
            "type": "currency",
            "default": 0,
            "isCustom": true
        },
        "cInsurancePremium": {
            "type": "currency",
            "default": 0,
            "isCustom": true
        },
        "cTotalLoanCost": {
            "type": "currency",
            "readOnly": true,
            "tooltip": "Total amount to be repaid",
            "isCustom": true
        },
        "cLoanPurpose": {
            "type": "text",
            "rows": 3,
            "tooltip": "Purpose of the loan",
            "isCustom": true
        },
        "cApplicantMonthlyIncome": {
            "type": "currency",
            "required": true,
            "tooltip": "Copied from Lead during conversion",
            "isCustom": true
        },
        "cApplicantEmploymentType": {
            "type": "enum",
            "options": [
                "Salaried",
                "Self-Employed",
                "Business",
                "Retired"
            ],
            "required": true,
            "isCustom": true
        },
        "cApplicantEmployerName": {
            "type": "varchar",
            "maxLength": 150,
            "isCustom": true,
            "options": []
        },
        "cApplicantCreditScore": {
            "type": "int",
            "min": 300,
            "max": 900,
            "isCustom": true
        },
        "cMonthlyObligations": {
            "type": "currency",
            "tooltip": "Existing monthly obligations (EMIs, rent, etc.)",
            "isCustom": true
        },
        "cCalculatedFOIR": {
            "type": "float",
            "readOnly": true,
            "tooltip": "Fixed Obligation to Income Ratio %",
            "isCustom": true
        },
        "cCalculatedDTI": {
            "type": "float",
            "readOnly": true,
            "tooltip": "Debt-to-Income Ratio %",
            "isCustom": true
        },
        "cSecurityType": {
            "type": "enum",
            "options": [
                "",
                "Gold Jewelry",
                "Vehicle",
                "Property",
                "Fixed Deposit",
                "Guarantor",
                "Mixed",
                "Stocks"
            ],
            "default": null,
            "isCustom": true,
            "style": {
                "": null,
                "Gold Jewelry": null,
                "Vehicle": null,
                "Property": null,
                "Fixed Deposit": null,
                "Guarantor": null,
                "Mixed": null,
                "Stocks": null
            }
        },
        "cSecurityValue": {
            "type": "currency",
            "default": 0,
            "isCustom": true
        },
        "cSecurityDescription": {
            "type": "text",
            "rows": 3,
            "tooltip": "Details of collateral/security",
            "isCustom": true
        },
        "cLtvRatio": {
            "type": "float",
            "readOnly": true,
            "tooltip": "Loan-to-Value ratio %",
            "isCustom": true
        },
        "cHasGuarantor": {
            "type": "bool",
            "default": false,
            "isCustom": true
        },
        "cGuarantorName": {
            "type": "varchar",
            "maxLength": 150,
            "isCustom": true
        },
        "cGuarantorNIC": {
            "type": "varchar",
            "maxLength": 12,
            "isCustom": true
        },
        "cGuarantorMonthlyIncome": {
            "type": "currency",
            "isCustom": true
        },
        "cGuarantorContactNumber": {
            "notStorable": true,
            "type": "phone",
            "isCustom": true,
            "typeList": [
                "Mobile",
                "Home",
                "Office"
            ],
            "defaultType": "Mobile"
        },
        "cGuarantorRelationship": {
            "type": "enum",
            "options": [
                "Parent",
                "Spouse",
                "Sibling",
                "Friend",
                "Business Partner",
                "Other"
            ],
            "isCustom": true
        },
        "cApprovalStatus": {
            "type": "enum",
            "options": [
                "Pending Review",
                "Under Credit Assessment",
                "Pending Branch Manager",
                "Pending Regional Manager",
                "Pending Credit Committee",
                "Approved",
                "Rejected",
                "Conditional Approval"
            ],
            "default": "Pending Review",
            "required": true,
            "isCustom": true,
            "style": {
                "Pending Review": "primary",
                "Under Credit Assessment": "warning",
                "Pending Branch Manager": "primary",
                "Pending Regional Manager": "primary",
                "Pending Credit Committee": "primary",
                "Approved": "success",
                "Rejected": "danger",
                "Conditional Approval": "danger"
            }
        },
        "cApprovalLevel": {
            "type": "enum",
            "options": [
                "Branch Level (< LKR 500K)",
                "Regional Level (< LKR 2M)",
                "Credit Committee (> LKR 2M)"
            ],
            "isCustom": true
        },
        "cBranchManagerApprover": {
            "type": "link",
            "entity": "User",
            "isCustom": true
        },
        "cBranchManagerApprovalDate": {
            "type": "datetime",
            "isCustom": true
        },
        "cBranchManagerRemarks": {
            "type": "text",
            "rows": 3,
            "isCustom": true
        },
        "cRegionalManagerApprover": {
            "type": "link",
            "entity": "User",
            "isCustom": true
        },
        "cRegionalManagerApprovalDate": {
            "type": "datetime",
            "isCustom": true
        },
        "cRegionalManagerRemarks": {
            "type": "text",
            "rows": 3,
            "isCustom": true
        },
        "cCreditCommitteeApprovalDate": {
            "type": "datetime",
            "isCustom": true
        },
        "cCreditCommitteeRemarks": {
            "type": "text",
            "rows": 3,
            "isCustom": true
        },
        "cRejectionReason": {
            "type": "enum",
            "options": [
                "",
                "Insufficient Income",
                "Poor Credit History",
                "High Existing Obligations",
                "Inadequate Security",
                "Fraudulent Application",
                "KYC/Documentation Issues",
                "Policy Violation",
                "Other"
            ],
            "isCustom": true,
            "style": {
                "": null,
                "Insufficient Income": null,
                "Poor Credit History": null,
                "High Existing Obligations": null,
                "Inadequate Security": null,
                "Fraudulent Application": null,
                "KYC/Documentation Issues": null,
                "Policy Violation": null,
                "Other": null
            }
        },
        "cDocumentChecklistStatus": {
            "type": "enum",
            "options": [
                "Not Started",
                "In Progress",
                "Pending Customer",
                "Complete",
                "Incomplete"
            ],
            "default": "Not Started",
            "isCustom": true,
            "style": {
                "Not Started": "info",
                "In Progress": "warning",
                "Pending Customer": "primary",
                "Complete": "success",
                "Incomplete": "danger"
            }
        },
        "cDocumentsReceived": {
            "type": "multiEnum",
            "options": [
                "NIC Copy",
                "Salary Slips",
                "Bank Statements",
                "Employment Letter",
                "Utility Bill",
                "Property Documents",
                "Vehicle Registration",
                "Guarantor NIC",
                "Business Registration"
            ],
            "isCustom": true
        },
        "cDocumentsMissing": {
            "type": "text",
            "rows": 3,
            "isCustom": true
        },
        "cAgreementPrepared": {
            "type": "bool",
            "default": false,
            "isCustom": true
        },
        "cAgreementSignedDate": {
            "type": "date",
            "isCustom": true
        },
        "cDisbursementStatus": {
            "type": "enum",
            "options": [
                "Not Initiated",
                "Pending Disbursement",
                "Disbursed",
                "Failed",
                "Cancelled"
            ],
            "default": "Not Initiated",
            "isCustom": true,
            "style": {
                "Not Initiated": "info",
                "Pending Disbursement": "primary",
                "Disbursed": "success",
                "Failed": "danger",
                "Cancelled": "danger"
            }
        },
        "cDisbursementDate": {
            "type": "date",
            "isCustom": true
        },
        "cDisbursementAmount": {
            "type": "currency",
            "isCustom": true
        },
        "cDisbursementMethod": {
            "type": "enum",
            "options": [
                "Bank Transfer",
                "Cheque",
                "Cash",
                "Direct to Vendor"
            ],
            "isCustom": true
        },
        "cDisbursementBankName": {
            "type": "varchar",
            "maxLength": 100,
            "isCustom": true
        },
        "cDisbursementAccountNumber": {
            "type": "varchar",
            "maxLength": 20,
            "isCustom": true
        },
        "cDisbursementAccountName": {
            "type": "varchar",
            "maxLength": 150,
            "isCustom": true
        },
        "cLoanAccountNumber": {
            "type": "varchar",
            "maxLength": 20,
            "tooltip": "CBS-generated loan account number",
            "isCustom": true
        },
        "cCbsReferenceNumber": {
            "type": "varchar",
            "maxLength": 50,
            "tooltip": "Core Banking System reference",
            "isCustom": true
        },
        "cDaysInPipeline": {
            "type": "int",
            "readOnly": true,
            "isCustom": true
        },
        "cDaysToApproval": {
            "type": "int",
            "readOnly": true,
            "isCustom": true
        },
        "cDaysToDisbursement": {
            "type": "int",
            "readOnly": true,
            "isCustom": true
        },
        "cConversionDate": {
            "type": "datetime",
            "tooltip": "When lead was converted to opportunity",
            "isCustom": true
        },
        "cCLoanStage": {
            "type": "enum",
            "options": [
                "",
                "Application Created",
                "Document Collection",
                "Credit Assessment",
                "Security Valuation",
                "Pending Approval - Branch",
                "Pending Approval - Regional",
                "Approved - Agreement Pending",
                "Agreement - Signed",
                "Pending Disbursement",
                "Disbursed - Won",
                "Rejected - Lost",
                "Cancelled - Lost"
            ],
            "style": {
                "": null,
                "Application Created": "primary",
                "Document Collection": null,
                "Credit Assessment": "primary",
                "Security Valuation": "primary",
                "Pending Approval - Branch": "warning",
                "Pending Approval - Regional": "warning",
                "Approved - Agreement Pending": "success",
                "Agreement - Signed": "success",
                "Pending Disbursement": "success",
                "Disbursed - Won": "success",
                "Rejected - Lost": "danger",
                "Cancelled - Lost": "danger"
            },
            "default": "Application Created",
            "maxLength": 100,
            "isCustom": true
        },
        "stage": {
            "style": {
                "Prospecting": "primary",
                "Qualification": null,
                "Proposal": "warning",
                "Negotiation": "success",
                "Closed Won": "success",
                "Closed Lost": "info"
            }
        }
    },
    "links": {
        "cSourceLead": {
            "type": "belongsTo",
            "entity": "Lead",
            "foreign": "createdOpportunities",
            "audited": true,
            "isCustom": true
        },
        "cBranchManagerApprover": {
            "type": "belongsTo",
            "entity": "User",
            "foreign": "assignedOpportunities",
            "audited": true,
            "isCustom": true
        },
        "cRegionalManagerApprover": {
            "type": "belongsTo",
            "entity": "User",
            "foreign": "assignedOpportunities",
            "audited": true,
            "isCustom": true
        }
    }
}