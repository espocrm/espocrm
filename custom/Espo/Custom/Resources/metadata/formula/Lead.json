{
    "beforeSaveCustomScript": "ifThen(\n    cCustomerSegment == 'Existing Customer',\n    \n    // Personal Details Mapping\n    firstName = cContact.firstName;\n    lastName = cContact.lastName;\n    middleName = cContact.middleName;\n    emailAddress = cContact.emailAddress;\n    phoneNumber = cContact.phoneNumber;\n    \n    // Identity & Demographic Mapping (Based on your screenshots)\n    cNICNo = cContact.cNICNumber;\n    cDateOfBirth = cContact.cDateOfBirth;\n    cGender = cContact.cGender;\n    \n    // Address Mapping\n    addressStreet = cContact.addressStreet;\n    addressCity = cContact.addressCity;\n    addressState = cContact.addressState;\n    addressCountry = cContact.addressCountry;\n    addressPostalCode = cContact.addressPostalCode;\n    \n    // Branch Mapping (Copying the Link)\n    cBranchId = cContact.cBranchId;\n    cBranchName = cContact.cBranchName;\n\n    // Ensure the Lead record has a visible name in lists\n    name = string\\concatenate(firstName, ' ', lastName);\n);\n\n// REFERAL NUMBER\n// Change $autoIncrimentNo and $referalNo values as per the module fields\n$autoIncrimentNo = cLeadID\n$referalNo = cLeadNumber\n$datePart = datetime\\format(datetime\\today(), 'DD/MM/YYYY');\n$incrValue = $autoIncrimentNo % 10000;\nifThen($incrValue == 0, $incrValue = 1);\n$paddedNumber = string\\pad($incrValue, 5, '0', 'left');\n$referalNo = string\\concatenate('L', $datePart, $paddedNumber);"
}